
path-constant ROOT : . ;
path-constant BUILD : build ;

project root
    : requirements 
        <threading>multi
        <warnings-as-errors>on
        <cxxflags>-Wall
        <cxxflags>-Wextra
        <cxxflags>-std=c++0x
        <debug-symbols>on
        #<runtime-debugging>on
        #<cxxflags>-Weffc++
        #<define>BOOST_ASIO_ENABLE_HANDLER_TRACKING
    : default-build debug 
    : build-dir $(BUILD) 
;

# Figure out where to install to.
# Use seperate 'release' & 'debug' directories
if release in [ modules.peek : ARGV ]
{ path-constant INSTALL : release ; }
else
{ path-constant INSTALL : debug ; }

# Finally, look for a user-provided override
.user_path = [ MATCH --install=(.*) : [ modules.peek : ARGV ] ] ;
if $(.user_path)
{
    ECHO Installing to $(.user_path) ;
    path-constant INSTALL : $(.user_path) ;
}

using python ;

# external libraries we'll need
lib boost_system ;
lib boost_python ;
lib boost_thread ;
lib boost_filesystem ;
lib protobuf ;

build-project proto_src ;
build-project cpp_src ;
build-project bindings ;
build-project py_src ;

